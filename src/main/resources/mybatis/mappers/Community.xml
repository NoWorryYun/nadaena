<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Community">

	<!-- 커뮤니티 리스트 불러오기 -->
	<select id="comuList" resultType="BoardVo">
		<![CDATA[
			select  rn,
			        ort.userNo,
			        ort.boardNo,
			        ort.challengeNo,
			        ort.clgTitle,
			        ort.category,
			        ort.title,
			        ort.boardContent,
			        ort.hit,
			        ort.boardDate
			from(select rownum rn,
			            ot.userNo,
			            ot.boardNo,
			            ot.challengeNo,
			            ot.clgTitle,
			            ot.category,
			            ot.title,
			            ot.boardContent,
			            ot.hit,
			            ot.boardDate boardDate
			    from (select    u.userNo userNo,
			                    b.boardNo boardNo,
			                    c.challengeNo challengeNo,
			                    c.clgTitle clgTitle,
			                    b.category category,
			                    b.title title,
			                    b.content boardContent,
			                    b.hit hit,
			                    b.boardDate boardDate
			         from users u, challenge c, board b
			         where u.userNo = b.userNo
			         and c.challengeNo = b.challengeNo
			         order by boardNo desc) ot
			    )ort
			where ort.rn >=1
			and ort.rn <=10
		
		]]>
	</select>




	<select id="comentList" resultType="BoardVo">
		<![CDATA[
			select  rn,
			        ort.userNo,
			        ort.boardNo,
			        ort.challengeNo,
			        ort.clgTitle,
			        ort.category,
			        ort.title,
			        ort.boardContent,
			        ort.hit,
			        ort.boardDate,
			        ort.commentNo,
			        ort.commentDate,
			        ort.comments
			from (select rownum rn,
			             ot.userNo,
			             ot.boardNo,
			             ot.challengeNo,
			             ot.clgTitle,
			             ot.category,
			             ot.title,
			             ot.boardContent,
			             ot.hit,
			             ot.boardDate,
			             ot.commentNo,
			             ot.commentDate,
			             ot.comments
			    from(select u.userNo userNo,
			                b.boardNo boardNo,
			                c.challengeNo challengeNo,
			                c.clgTitle clgTitle,
			                b.category category,
			                b.title title,
			                b.content boardContent,
			                b.hit hit,
			                b.boardDate boardDate,
			                cm.commentNo commentNo,
			                cm.commentDate commentDate,
			                cm.comments comments
			        from users u, challenge c, board b, comments cm
			        where u.userNo = b.userNo
			        and c.challengeNo = b.challengeNo
			        and cm.boardNo = b.boardNo
			        order by commentNo desc) ot
			    )ort
			where ort.rn >=1
			and ort.rn <=10
		
		]]>
	</select>








</mapper>