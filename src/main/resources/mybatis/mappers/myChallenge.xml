<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="myChallenge">
 
	<!-- 참가챌린지 가져오기 -->
	<select id="selectList" parameterType="String" resultType="MCVo">
		<![CDATA[
			select  m.userNo,
					m.userClgNo,
					c.challengeNo,
					c.clgTitle,
					m.mychallengeDate,
					m.founder,
					m.achievement,
					m.state,
			        c.regdate,
			        c.period,
			        m.payment
			from challenge c, mychallenge m
			where c.challengeNo = m.challengeNo
			and   m.state = 1
		]]>
	</select>	
	 
	<select id="selectList2" parameterType="String" resultType="MCVo">
		<![CDATA[
			select  m.userNo,
					m.userClgNo,
					c.challengeNo,
					c.clgTitle,
					m.mychallengeDate,
					m.founder,
					m.achievement,
					m.state,
			        c.regdate,
			        c.period,
			        m.payment
			from challenge c, mychallenge m
			where c.challengeNo = m.challengeNo
			and   m.state = 2
		]]>
	</select>
	
	<!-- 리뷰불러오기 -->
	<select id="selectreviewList" parameterType="String" resultType="MRVo">
		<![CDATA[
			select  reviewNo,
					challengeNo,
					userNo,
					reviewContent
			from review
		]]>
	</select>
	
	<!-- 리뷰작성 -->
	<insert id="insertReview" parameterType="MRVo">
		<![CDATA[
			insert into review
			values (SEQ_REVIEWNO.nextval,
					#{challengeNo},
					null,
					null,
					#{reviewContent},
					sysdate
					)
		]]>
	</insert>
	
	<!-- 내가 쓴 리뷰 삭제 -->
	<delete id="deleteReview" parameterType="MRVo">
		<![CDATA[
			delete from review 
			where reviewNo = #{reviewNo}
		]]>
	</delete>
	
	
	
	
	
</mapper>